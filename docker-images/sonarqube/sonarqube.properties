# TON Lowcode Platform - SonarQube Configuration

# Database Configuration (PostgreSQL)
sonar.jdbc.username=sonarqube
sonar.jdbc.password=sonarqube_password_2024
sonar.jdbc.url=jdbc:postgresql://sonarqube-db:5432/sonarqubedb?currentSchema=public&prepareThreshold=0

# Web Server Configuration
sonar.web.host=0.0.0.0
sonar.web.port=9000
sonar.web.context=/

# Authentication & Security
sonar.forceAuthentication=false
sonar.security.realm=
sonar.authenticator.downcase=true

# Session Configuration
sonar.web.session.timeout.in.minutes=60
sonar.web.session.cookie.secure=false

# Compute Engine Configuration
sonar.ce.workerCount=1
sonar.ce.javaOpts=-Xmx2g -Xms128m -XX:+HeapDumpOnOutOfMemoryError

# Web Server JVM Configuration
sonar.web.javaOpts=-Xmx1g -Xms128m -XX:+HeapDumpOnOutOfMemoryError

# Search Configuration (Elasticsearch)
sonar.search.javaOpts=-Xmx1g -Xms1g -XX:MaxDirectMemorySize=256m -XX:+HeapDumpOnOutOfMemoryError
sonar.search.host=127.0.0.1
sonar.search.port=9001
sonar.search.httpPort=9001

# Path Configuration
sonar.path.data=/opt/sonarqube/data
sonar.path.temp=/opt/sonarqube/temp
sonar.path.logs=/opt/sonarqube/logs

# Update Center
sonar.updatecenter.activate=true

# Logging Configuration
sonar.log.level=INFO
sonar.log.rollingPolicy=time:yyyy-MM-dd
sonar.log.maxFiles=7

# Quality Gate Configuration
sonar.qualitygate.default=Sonar way

# Analysis Configuration for TypeScript/JavaScript
sonar.javascript.node.maxspace=8192
sonar.typescript.node.maxspace=8192

# Project Defaults
sonar.projectKey.default=lowcode-platform
sonar.projectName.default=TON Lowcode Platform
sonar.projectVersion.default=1.0.0

# Source Encoding
sonar.sourceEncoding=UTF-8

# Branch Analysis (Commercial features - disabled for Community)
# sonar.branch.name=main
# sonar.pullrequest.branch=feature-branch

# SCM Configuration
sonar.scm.disabled=false
sonar.scm.provider=git

# Exclusions for common paths
sonar.global.exclusions=**/node_modules/**,**/dist/**,**/build/**,**/coverage/**,**/*.min.js,**/*.bundle.js

# Test Exclusions
sonar.test.exclusions=**/*test*/**,**/*Test*/**,**/*.test.ts,**/*.test.js,**/*.spec.ts,**/*.spec.js

# Coverage Exclusions
sonar.coverage.exclusions=**/node_modules/**,**/dist/**,**/coverage/**,**/*.config.js,**/*.config.ts

# Duplication Exclusions
sonar.cpd.exclusions=**/*.min.js,**/node_modules/**

# Issue Exclusions (common patterns to ignore)
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# Ignore TODO comments in development
sonar.issue.ignore.multicriteria.e1.ruleKey=javascript:FixMe
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.js,**/*.ts

# Ignore console.log in development (should be removed in production)
sonar.issue.ignore.multicriteria.e2.ruleKey=javascript:S2228
sonar.issue.ignore.multicriteria.e2.resourceKey=**/*.js,**/*.ts

# Ignore empty constructors in TypeScript classes
sonar.issue.ignore.multicriteria.e3.ruleKey=typescript:S1186
sonar.issue.ignore.multicriteria.e3.resourceKey=**/*.ts

# Ignore magic numbers in test files
sonar.issue.ignore.multicriteria.e4.ruleKey=typescript:S109
sonar.issue.ignore.multicriteria.e4.resourceKey=**/*.test.ts,**/*.spec.ts

# Ignore cognitive complexity in generated files
sonar.issue.ignore.multicriteria.e5.ruleKey=typescript:S3776
sonar.issue.ignore.multicriteria.e5.resourceKey=**/dist/**,**/build/**

# Developer Configuration
sonar.technicalDebt.developmentCost=30
sonar.technicalDebt.ratingGrid=0.05,0.1,0.2,0.5

# Notification Configuration
sonar.notifications.delay=60

# Webhook Configuration (for CI/CD integration)
# sonar.webhooks.global.name=Jenkins
# sonar.webhooks.global.url=http://jenkins:8080/sonarqube-webhook/

# LDAP Configuration (if needed)
# sonar.security.realm=LDAP
# ldap.url=ldap://localhost:389
# ldap.bindDn=cn=sonar,ou=users,o=mycompany
# ldap.bindPassword=secret

# SSO Configuration (if needed)
# sonar.core.serverBaseURL=https://sonarqube.yourdomain.com